# 📱 알림 시스템 테스트 가이드

## 🎯 Expo Go vs 실제 빌드 비교

| 기능 | Expo Go | 실제 빌드 (TestFlight/APK) |
|------|---------|---------------------------|
| **즉시 알림** | ✅ 작동 | ✅ 작동 |
| **스케줄 알림** | ❌ 작동 안 함 | ✅ 작동 |
| **테스트 알림** | ✅ 작동 | ✅ 작동 |

## 📋 Expo Go에서 테스트 방법

### 1. 테스트 알림 발송 (즉시 확인)

**단계**:
1. 앱 실행
2. **설정 탭** 이동
3. **"테스트 알림 발송"** 버튼 클릭
4. 즉시 알림 수신 확인 ✅

**예상 알림**:
```
🔮 타로 타이머 테스트
알림이 정상적으로 작동하고 있습니다!
```

### 2. 알림 진단 확인

**단계**:
1. 설정 탭 → **"알림 진단 (개발용)"** 섹션
2. **"진단 실행"** 버튼 클릭
3. 다음 정보 확인:

```
권한: ✅ | 실제: ✅ | 스케줄됨: 8개
토큰: ✅ | 시도: 1회 | 진행중: ⭕
```

**의미**:
- **권한 ✅**: 알림 권한 허용됨
- **스케줄됨 8개**: 향후 8시간 분량 알림 예약됨
- **토큰 ✅**: Expo Push Token 생성 완료

### 3. 콘솔 로그 확인

Expo 개발자 도구에서 다음 로그 확인:

```
🔔 알림 권한 상태: granted ✅ 권한 있음
⏰ 다음 정각: 15:00
✅ [1] 15시 알림 스케줄 성공 (발송 예정: 2025-10-01 15:00)
✅ [2] 16시 알림 스케줄 성공 (발송 예정: 2025-10-01 16:00)
...
🎯 스케줄링 완료 요약
   • 예상 스케줄: 8개
   • 실제 확인: 8개
```

## 🚀 실제 빌드에서 테스트 방법

### iOS TestFlight

**1. 빌드 생성**
```bash
eas build --platform ios --profile development
```

**2. TestFlight 배포**
```bash
eas submit --platform ios
```

**3. TestFlight 앱 설치**
- TestFlight 앱에서 "타로 타이머" 설치
- 알림 권한 허용

**4. 스케줄 알림 테스트**
- 앱 실행 → 권한 허용
- 다음 정각까지 대기
- **정각에 알림 수신 확인** ✅

### Android APK

**1. 빌드 생성**
```bash
eas build --platform android --profile development
```

**2. APK 다운로드 및 설치**
- Expo 대시보드에서 APK 다운로드
- 기기에 설치

**3. 알림 테스트**
- 동일한 방식으로 테스트

## 🔍 문제 해결

### Q: Expo Go에서 알림이 안 와요
**A**: 정상입니다. Expo Go는 **즉시 알림**만 지원합니다.
- **해결**: 테스트 알림 버튼으로 확인
- **실제 테스트**: TestFlight/APK 빌드 필요

### Q: 테스트 알림도 안 와요
**A**: 권한 문제일 수 있습니다.
1. 아이폰 설정 → 알림 → Expo Go
2. 알림 허용 확인
3. 앱 재시작 후 다시 시도

### Q: 스케줄됨이 0개예요
**A**: 알림 권한이 없거나 스케줄링 실패
1. 권한 확인: 설정 → 알림
2. "알림 활성화" 토글 확인
3. "진단 실행" 버튼 클릭

## ✅ 성공 확인 체크리스트

### Expo Go (개발 환경)
- [ ] 테스트 알림 수신됨
- [ ] 알림 진단에서 권한 ✅ 확인
- [ ] 스케줄됨 8개 이상 확인
- [ ] 콘솔에서 스케줄 성공 로그 확인

### TestFlight/APK (프로덕션)
- [ ] 앱 설치 및 권한 허용
- [ ] 테스트 알림 수신됨
- [ ] 다음 정각에 시간별 알림 수신됨 ✅
- [ ] 조용한 시간에 알림 안 옴 확인
- [ ] 자정에 리셋 알림 수신됨

## 📊 예상 알림 스케줄

**현재 시각: 14:30**
**조용한 시간: 22:00 ~ 08:00**

```
✅ 15:00 - 🔮 타로 타이머 | [15시] The Magician - 창조와 의지
✅ 16:00 - 🔮 타로 타이머 | [16시] The High Priestess - 직관과 내면의 지혜
✅ 17:00 - 🔮 타로 타이머 | [17시] The Empress - 풍요와 모성
...
✅ 21:00 - 🔮 타로 타이머 | [21시] The Chariot - 의지와 승리
❌ 22:00 ~ 07:00 - (조용한 시간 - 알림 없음)
✅ 08:00 - 🔮 타로 타이머 | [8시] Strength - 용기와 인내
```

## 🎉 최종 확인

스케줄된 알림이 **실제로 작동하는지 확인**하려면:
1. **TestFlight 빌드** 생성 및 설치
2. **다음 정각까지 대기**
3. **정각에 알림 수신** 확인 ✅

Expo Go에서는 **테스트 알림만** 확인 가능합니다!
