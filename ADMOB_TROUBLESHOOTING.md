# AdMob 광고 문제 해결 가이드

## 🔴 TestFlight에서 광고가 표시되지 않는 경우

### 1. **AdMob 앱 승인 상태 확인** (가장 일반적인 원인)

#### 확인 방법:
1. https://apps.admob.com 로그인
2. 왼쪽 메뉴에서 "앱" 클릭
3. "Tarot Daily" 앱 찾기
4. 앱 상태 확인

#### 앱 상태별 대응:

**상태: "승인 대기 중" 또는 "검토 중"**
- ❌ **광고가 표시되지 않음**
- ⏰ **대기 시간**: 24-72시간
- 📝 **조치**: 승인 완료까지 대기

**상태: "승인됨" ✅**
- ✅ 광고가 정상적으로 표시되어야 함
- 광고가 여전히 표시되지 않으면 아래 체크리스트 확인

**상태: "거부됨" ❌**
- ⚠️ **조치 필요**: 거부 사유 확인 후 수정
- 일반적인 거부 사유:
  - 앱이 정책 위반
  - 앱에 충분한 콘텐츠 없음
  - 광고 배치가 정책 위반

### 2. **광고 단위 승인 상태 확인**

#### 확인 방법:
1. AdMob > "앱" > "Tarot Daily" 클릭
2. "광고 단위" 탭 클릭
3. "전면 광고" 단위 확인

#### 광고 단위 상태:

**상태: "승인 대기 중"**
- ❌ 광고가 표시되지 않음
- ⏰ 대기 시간: 24시간

**상태: "제공 중" ✅**
- ✅ 정상 작동

### 3. **앱 빌드 정보 확인**

```bash
# 현재 프로덕션 광고 ID
iOS 전면 광고: ca-app-pub-4284542208210945/5479246942
iOS 앱 ID: ca-app-pub-4284542208210945~6525956491

# 생성일
iOS: 2025-10-17
```

### 4. **디버깅 로그 확인**

#### TestFlight 앱 실행 후 확인할 로그:

```
✅ 정상 작동 시:
🎯 전면광고 ID: PRODUCTION (ca-app-pub-4284542208210945/5479246942)
📱 플랫폼: ios, __DEV__: false, isDevelopment: false
✅ 전면광고 로드 완료
🎬 전면광고 표시 요청 - Placement: daily_tarot_draw
✅ 전면광고 show() 성공

❌ 오류 발생 시:
❌ 전면광고 로드 실패: [오류 메시지]
⚠️ AdMob 앱 승인 상태를 확인하세요: https://apps.admob.com
```

#### 일반적인 오류 메시지:

**"No ad inventory available"**
- ✅ **원인**: 광고 재고 없음 (일시적)
- 📝 **조치**: 몇 분 후 재시도

**"App not approved"**
- ❌ **원인**: AdMob 앱 승인 대기 중
- 📝 **조치**: 승인 완료까지 대기

**"Ad unit not ready"**
- ⚠️ **원인**: 광고 단위 승인 대기 중
- 📝 **조치**: 승인 완료까지 대기

**"Network error"**
- 🌐 **원인**: 네트워크 연결 문제
- 📝 **조치**: 인터넷 연결 확인

### 5. **테스트 광고로 확인** (개발 환경)

```typescript
// app.json 또는 eas.json
{
  "expo": {
    "extra": {
      "EXPO_PUBLIC_APP_ENV": "development" // 테스트 광고 사용
    }
  }
}
```

테스트 광고 ID가 사용되면:
- ✅ Google 제공 테스트 광고 즉시 표시
- ✅ 승인 불필요
- ⚠️ 실제 수익 발생하지 않음

### 6. **프리미엄 구독 상태 확인**

```typescript
// 프리미엄 사용자는 광고가 표시되지 않음
if (this.isPremiumUser) {
  console.log('💎 프리미엄 사용자: 전면광고 건너뛰기');
  return { success: true, revenue: 0 };
}
```

#### 확인 방법:
1. 앱에서 "설정" 탭 열기
2. "프리미엄 관리" 섹션 확인
3. "현재 상태: 무료" 인지 확인

### 7. **일일 광고 제한 확인**

현재 설정:
- **일일 전면 광고 최대**: 10회
- **제한 도달 시**: 광고 표시 안 됨

#### 확인 로그:
```
⚠️ 일일 전면광고 제한 도달
```

#### 리셋 방법:
- 자정(00:00)에 자동 리셋
- 또는 앱 재설치

## 📊 현재 상태 요약 (Build 99)

### iOS 프로덕션 광고 설정:
- ✅ 전면 광고 ID 설정 완료
- ✅ 광고 시스템 구현 완료
- ⏳ **AdMob 앱 승인 대기 중 (예상 24-72시간)**

### 광고 표시 조건:
1. ✅ 24시간 타로 뽑기 직후
2. ✅ 타이머 탭 10분 간격
3. ❌ 프리미엄 사용자 제외
4. ❌ 일일 10회 제한

## 🔧 임시 해결 방법 (승인 대기 중)

### 옵션 1: 테스트 광고 사용
```bash
# eas.json의 production 프로필 수정
{
  "build": {
    "production": {
      "env": {
        "EXPO_PUBLIC_APP_ENV": "development"  // 임시로 테스트 광고 사용
      }
    }
  }
}
```

⚠️ **주의**: 실제 수익이 발생하지 않으므로 승인 후 원복 필요

### 옵션 2: 승인 완료까지 대기
- 👍 **권장 방법**
- 24-72시간 후 자동으로 정상 작동

## 📞 추가 지원

### AdMob 지원 센터:
- https://support.google.com/admob

### 자주 묻는 질문:
- https://support.google.com/admob/answer/7356431

---

**마지막 업데이트**: 2025-10-27
**작성자**: Claude Code AI Assistant
